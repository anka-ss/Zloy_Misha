#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ó–ª–æ–π –ú–∏—à–∞
echo "üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ó–ª–æ–π –ú–∏—à–∞..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
if [ -z "$BOT_TOKEN" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    exit 1
fi

if [ -z "$MONITORED_GROUPS" ]; then
    echo "‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: MONITORED_GROUPS –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

# –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞)
echo "üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:"
echo "   Node.js –≤–µ—Ä—Å–∏—è: $(node --version)"
echo "   NPM –≤–µ—Ä—Å–∏—è: $(npm --version)"
echo "   –ü–æ—Ä—Ç: ${PORT:-3000}"
echo "   –ú–æ–Ω–∏—Ç–æ—Ä–∏–º—ã–µ –≥—Ä—É–ø–ø—ã: ${MONITORED_GROUPS:-'–Ω–µ –∑–∞–¥–∞–Ω—ã'}"
echo "   –ì—Ä—É–ø–ø–∞ –æ—Ç—á–µ—Ç–æ–≤: ${REPORTS_GROUP_ID:-'–Ω–µ –∑–∞–¥–∞–Ω–∞'}"

# –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
sleep 3

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
echo "üéØ –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞..."
exec node bot.js
